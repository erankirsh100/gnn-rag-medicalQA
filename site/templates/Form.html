<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>MedAI QA</title>
        <style>
        @import url('https://fonts.googleapis.com/css2?family=Myriad+Pro:wght@400;700&display=swap');

        body {
            font-family: Arial, sans-serif;
            background-color: #0981A3;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .form-container {
            background-color: #2D2D2D;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            width: 500px;
        }
        h1 {
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Myriad Pro', Arial, sans-serif;
            font-weight: 750;
            font-size: 38px;
            color: #0981A3; 
        }
        h1 img {
            width: 170px;
            height: auto;
            margin-right: 10px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            color: #f9f9fa;
        }
        input[type="text"] {
            width: 100%;
            padding: 8px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        input[type="submit"] {
            width: 100%;
            font-size: 18px;
            padding: 10px;
            background-color: #0981A3;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        input[type="submit"]:hover {
            background-color: #0981A3;
        }
        .field-row {
        display: flex;
        gap: 20px;
        margin-bottom: 15px;
    }
    
    .field-row > div {
        flex: 1;
    }
    #goals, #passions {
        width: 100%;
        padding: 8px;
        box-sizing: border-box;
        margin-bottom: 15px;
    }

    #moreOptionsBtn {
        padding: 8px 16px;
        background-color: #f0f0f0;
        border: 1px solid #ccc;
        border-radius: 4px;
        cursor: pointer;
        margin-bottom: 10px;
    }

    #moreOptionsBtn:hover {
        background-color: #e0e0e0;
    }

    .small-left, .small-right {
        width: 100px;       /* smaller images */
        height: auto;      /* maintain aspect ratio */
        border-radius: 50%;   /* makes the image circular */
        object-fit: cover; 
    }

    .middle {
        width: 300px;      /* main image bigger */
        height: auto;
    }

    .autocomplete-items {
    border: 1px solid #d4d4d4;
    max-height: 150px;
    overflow-y: auto;
    position: absolute;
    background-color: #fff;
    z-index: 99;
}
.autocomplete-item {
    padding: 5px;
    cursor: pointer;
}
.autocomplete-item:hover {
    background-color: #e9e9e9;
}
</style>
    </style>
        <script>
        function validateForm() {
            var age = document.getElementById("age").value;
            
            // var englishRegex = /^[A-Za-z0-9\s,./'!?"':]+$/;  
            // var linkedinRegex = /^https:\/\/www\.linkedin\.com\/in\/[a-zA-Z0-9-]+\/?$/;
            // var userIdRegex = /^[a-zA-Z0-9-]{3,100}$/;
            var male = document.getElementById('gender-male').checked;
            var female = document.getElementById('gender-female').checked;

            var symptom = document.getElementById("symptom").value;


            if (age === ""|| isNaN(age) || age < 0 || age > 100) {
                alert("Please enter a valid age!");
                return false;
            }

            if (!male && !female) {
                alert('Please fill if you are a male or female.');
                return false;
            }
            return true;
        }


        function toggleOptions() {
    const optionsDiv = document.getElementById('additionalOptions');
    const button = document.getElementById('moreOptionsBtn');
    
    if (optionsDiv.style.display === 'none') {
        optionsDiv.style.display = 'block';
        button.textContent = 'See Less';
    } else {
        optionsDiv.style.display = 'none';
        button.textContent = 'Additional Details';
    }
}
    </script>
    </head>
    <body>
        <div class="form-container">
            <h1>
                <img class="small-left" style="margin-left:10px;" src="{{ url_for('static', filename='pics/logo.jpg') }}" alt="Logo">
                <img class="middle" src="{{ url_for('static', filename='pics/logo_words.jpg') }}" alt="Logo Words">
                <img class="small-right" style="margin-right:10px;" src="{{ url_for('static', filename='pics/logo.jpg') }}" alt="Logo">

            </h1>
            <!-- Flash message placeholder -->
            {% with messages = get_flashed_messages() %}
            {% if messages %}
            <div class="flash-messages">
                {% for message in messages %}
                <p style="color: red;">{{ message }}</p>
                {% endfor %}
            </div>
            {% endif %}
            {% endwith %}
            <form action="/submit" method="post"
                onsubmit="return validateForm()">
                <p
                    style="text-align: left; color: #FFFFFF; margin-bottom: 12px;"><u>Please
                        enter the following details:</u><br><br></p>
                <div class="field-row">
                    

                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                        <label for="age"><strong>Age:</strong></label>
                        <input type="text" id="age" name="age" style="width: 60px;">
                    </div>

                </div>

                <div class="field-row">
                    <label><strong>Gender:</strong></label>
                    <br>
                    <div style="gap: 7px; align-items: center;">
                        <input type="radio" id="gender-male" name="gender"
                            value="Male">
                        <label for="gender-male" >Male</label>
                    </div>
                    <div>
                        <input type="radio" id="gender-female" name="gender"
                            value="Female">
                        <label for="gender-female">Female</label>
                    </div>
                </div>
        
    <label for="symptom"><strong>Enter symptoms:</strong></label>
    <input type="text" id="symptom" name="symptom" autocomplete="off" placeholder="Type a symptom">
    <div id="autocomplete-list" class="autocomplete-items"></div>

    <script>
       const input = document.getElementById('symptom');
const list = document.getElementById('autocomplete-list');

input.addEventListener('input', async () => {
    const query = input.value.split(',').pop().trim();  
    list.innerHTML = '';
    if (!query) return;

    const res = await fetch(`/autocomplete?q=${query}`);
    const data = await res.json();

    data.forEach(item => {
        const div = document.createElement('div');
        div.textContent = item;
        div.classList.add('autocomplete-item');
        div.addEventListener('click', () => {
            let current = input.value.split(',').map(s => s.trim());
            current.pop();  // remove the last partially typed symptom
            current.push(item);  // add the selected symptom
            input.value = current.join(', ') + ', '; // keep comma for next symptom
            list.innerHTML = '';
            input.focus(); // keep typing
        });
        list.appendChild(div);
    });
});

// close dropdown if click outside
document.addEventListener('click', function(e) {
    if (e.target !== input) {
        list.innerHTML = '';
    }
});
    </script>



                <div>
                    <label for="description"><strong>Describe your symptoms:</strong></label>
                    <textarea id="description" name="description" rows="4" required style="width: 100%;"></textarea>
                </div>


                <label for="duration">How long have you had this issue?</label>
                    <select id="duration" name="duration" required>
                        <option value="">-- Please select --</option>
                        <option value="days">Days</option>
                        <option value="weeks">Weeks</option>
                        <option value="months">Months</option>
                        <option value="years">Years</option>
                    </select>
                </br></br>

                <div class="field-row">
                    <label for="severity"><strong>Severity of the issue:</strong></label>
                    <br>
                    <input type="range" id="severity" name="severity" min="1" max="5" step="1" value="3" oninput="updateSeverity(this)">
                    <span id="severityValue" style="color: white;">3</span>

                    <script>
                        function updateSeverity(slider) {
                        const value = slider.value;
                        document.getElementById('severityValue').textContent = value;

                        const green = 255 - (value - 1) * (255 / 4); 
                        const red = (value - 1) * (255 / 4);         

                        slider.style.background = `rgb(${red},${green},0)`; 
                    }

                    // Initialize color on page load
                    updateSeverity(document.getElementById('severity'));
                    </script>

                    <style>
                    input[type=range] {
                    -webkit-appearance: none;
                    width: 200px;
                    height: 10px;
                    border-radius: 5px;
                    background: green;
                    outline: none;
                    }

                    input[type=range]::-webkit-slider-thumb {
                    -webkit-appearance: none;
                    appearance: none;
                    width: 20px;
                    height: 20px;
                    background: #fff;
                    border: 2px solid #000;
                    border-radius: 50%;
                    cursor: pointer;
                    }
                    </style>
                </div>

                </br></br>

                <div class="field-row">
                    <button type="button" id="moreOptionsBtn"
                        onclick="toggleOptions()">Additional Details</button>
                </div>

                <div id="additionalOptions" style="display: none;">
                    <div class="field-row">
                        <label>Do you smoke?</label>
                        <br>
                        <div>
                            <input type="radio" id="smoker-yes" name="smoker"
                                value="smoker">
                            <label for="smoker-yes">Yes</label>
                        </div>
                        <div>
                            <input type="radio" id="smoker-no" name="smoker"
                                value="non_smoker">
                            <label for="smoker-no">No</label>
                        </div>
                    </div>

                    <div class="field-row">
                        <label>How often do you exercise?</label>
                        
                        <div>
                            <input type="radio" id="exercise_never" name="exercise"
                                value="never">
                            <label for="exercise_never">Never</label>
                        </div>
                        <div>
                            <input type="radio" id="exercise_rarely" name="exercise"
                                value="rarely">
                            <label for="exercise_rarely">Rarely</label>
                        </div>
                        <div>
                            <input type="radio" id="exercise_regularly" name="exercise"
                                value="regularly">
                            <label for="exercise_regularly">Regularly</label>
                        </div>
                        <div>
                            <input type="radio" id="exercise_daily" name="exercise"
                                value="daily">
                            <label for="exercise_daily">Daily</label>
                        </div>
                    </div>
                </div>

                <input type="submit" value="Submit">
            </form>
        </div>
    </body>
</html>